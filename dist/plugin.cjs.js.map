{"version":3,"file":"plugin.cjs.js","sources":["esm/web.js","esm/index.js"],"sourcesContent":["import { PublicClientApplication } from '@azure/msal-browser';\r\nimport { WebPlugin } from '@capacitor/core';\r\nexport class MsAuth extends WebPlugin {\r\n    async login(options) {\r\n        const context = this.createContext(options);\r\n        try {\r\n            return await this.acquireTokenSilently(context, options.scopes).catch(() => this.acquireTokenInteractively(context, options.scopes));\r\n        }\r\n        catch (error) {\r\n            console.error('MSAL: Error occurred while logging in', error);\r\n            throw error;\r\n        }\r\n    }\r\n    logout(options) {\r\n        const context = this.createContext(options);\r\n        if (!context.getAllAccounts()[0]) {\r\n            return Promise.reject(new Error('Nothing to sign out from.'));\r\n        }\r\n        else {\r\n            return context.logoutPopup();\r\n        }\r\n    }\r\n    createContext(options) {\r\n        var _a, _b, _c;\r\n        const config = {\r\n            auth: {\r\n                clientId: options.clientId,\r\n                domainHint: options.domainHint,\r\n                authority: (_a = options.authorityUrl) !== null && _a !== void 0 ? _a : `https://login.microsoftonline.com/${(_b = options.tenant) !== null && _b !== void 0 ? _b : 'common'}`,\r\n                knownAuthorities: options.knownAuthorities,\r\n                redirectUri: (_c = options.redirectUri) !== null && _c !== void 0 ? _c : this.getCurrentUrl(),\r\n            },\r\n            cache: {\r\n                cacheLocation: 'localStorage',\r\n            },\r\n        };\r\n        return new PublicClientApplication(config);\r\n    }\r\n    getCurrentUrl() {\r\n        return window.location.href.split(/[?#]/)[0];\r\n    }\r\n    async acquireTokenInteractively(context, scopes) {\r\n        const { accessToken, idToken } = await context.acquireTokenPopup({\r\n            scopes,\r\n            prompt: 'select_account',\r\n        });\r\n        return { accessToken, idToken, scopes };\r\n    }\r\n    async acquireTokenSilently(context, scopes) {\r\n        const { accessToken, idToken } = await context.acquireTokenSilent({\r\n            scopes,\r\n            account: context.getAllAccounts()[0],\r\n        });\r\n        return { accessToken, idToken, scopes };\r\n    }\r\n}\r\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\r\nimport { MsAuth } from './web';\r\nconst MsAuthPlugin = registerPlugin('MsAuthPlugin', {\r\n    web: () => new MsAuth(),\r\n});\r\nexport * from './definitions';\r\nexport { MsAuthPlugin };\r\n//# sourceMappingURL=index.js.map"],"names":["WebPlugin","PublicClientApplication","registerPlugin"],"mappings":"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"}